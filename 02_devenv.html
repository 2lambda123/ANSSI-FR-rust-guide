<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Development Environment - Secure Rust Guidelines</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Recommendations for secure applications development with Rust">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li><a href="01_introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><a href="02_devenv.html" class="active"><strong aria-hidden="true">2.</strong> Development Environment</a></li><li><a href="03_libraries.html"><strong aria-hidden="true">3.</strong> Libraries</a></li><li><a href="04_language.html"><strong aria-hidden="true">4.</strong> The language</a></li><li><a href="05_test_fuzz.html"><strong aria-hidden="true">5.</strong> Test and fuzzing</a></li><li class="affix"><a href="LICENCE.html">Licence</a></li><li class="affix"><a href="checklist.html">Checklist</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Secure Rust Guidelines</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#development-environment" id="development-environment">Development Environment</a></h1>
<h2><a class="header" href="#rustup" id="rustup"><code>rustup</code></a></h2>
<p><code>rustup</code> is the Rust toolchain installer. Among other things, it enables
switching between different flavors of the toolchain (stable, beta, nightly),
managing additional components installation and keeping them up to date.</p>
<blockquote>
<h3><a class="header" href="#warning" id="warning">Warning:</a></h3>
<p>From a security perspective, <code>rustup</code> does perform all downloads over HTTPS,
but doesn’t validate signatures of downloads. Protection against downgrade
attacks, certificate pinning, validation of signatures are works that are
currently in progress. In some cases, it may be preferable to opt for
an alternative installation method listed in the <em>Install</em> section of the
official rust website.</p>
</blockquote>
<h3><a class="header" href="#rust-editions" id="rust-editions">Rust Editions</a></h3>
<p>Several flavors, called <em>editions</em>, of the Rust language coexist.
The concept of editions has been introduced to clarify new features
implementation and to make them incremental. But as stated in the
<a href="https://rust-lang-nursery.github.io/edition-guide/editions/index.html">Edition Guide</a>,
this doesn’t mean that new features and improvements will be shipped on
the last edition only.</p>
<p>However, some editions could bring new keywords and language constructs.
Recommendations for secure applications development then remain closely
linked to features that are used in such applications rather than the actual
edition that is declared in it.
In the rest of this guide, best effort will be made to highlight constructions
and language features that are specific to a particular Rust edition.</p>
<blockquote>
<h3><a class="header" href="#note" id="note">Note:</a></h3>
<p>No specific edition is recommended, as long as users follow recommendations
that are expressed in relation to features offered by edition that has been
chosen.</p>
</blockquote>
<h3><a class="header" href="#stable-nightly-and-beta-toolchains" id="stable-nightly-and-beta-toolchains">Stable, nightly and beta toolchains</a></h3>
<p>Orthogonally to editions that allows one to select a flavor (a set of features)
of the Rust language, the Rust toolchain is provided in three different
versions, called <em>release channels</em>:</p>
<ul>
<li><em>nightly</em> releases are created once a day,</li>
<li><em>nightly</em> releases are promoted every six weeks to <em>beta</em> releases,</li>
<li><em>beta</em> releases are promoted every six weeks to <em>stable</em> releases.</li>
</ul>
<p>When playing with different toolchains, it is important to check not only what
the default toolchain is, but also if overrides are currently set for some
directories.</p>
<pre><code class="language-shell">$ pwd
/tmp/foo
$ rustup toolchain list
stable-x86_64-unknown-linux-gnu (default)
beta-x86_64-unknown-linux-gnu
nightly-x86_64-unknown-linux-gnu
$ rustup override list
/tmp/foo                                	nightly-x86_64-unknown-linux-gnu
$
</code></pre>
<blockquote>
<h3><a class="header" href="#rule-a-iddenv-stableadenv-stable" id="rule-a-iddenv-stableadenv-stable">Rule <a id="DENV-STABLE"></a>DENV-STABLE:</a></h3>
<p>Development of a secure application must be done using a fully stable
toolchain, for limiting potential compiler, runtime or tool bugs.</p>
</blockquote>
<p>When using a specific cargo subcommand that requires a nightly component,
it is preferable to run it by switching the toolchain only locally, instead
of explicitly switching the complete toolchain. For example, to run the
(nightly) latest <code>rustfmt</code>:</p>
<pre><code class="language-shell">$ rustup toolchain list
stable-x86_64-unknown-linux-gnu (default)
beta-x86_64-unknown-linux-gnu
nightly-x86_64-unknown-linux-gnu
$ rustup run nightly cargo fmt
$ # or
$ cargo +nightly fmt
$
</code></pre>
<h2><a class="header" href="#cargo" id="cargo"><code>cargo</code></a></h2>
<p>Once <code>rustup</code> has been used to set up the appropriate Rust toolchain, the
tool <code>cargo</code> has been made available. It’s the Rust package manager, that
provides ways to structure and build projects, managing on its own dependencies
download among other tasks. It’s also a front-end to run complementary tools such
as those that are described below, in the form of sub-commands.</p>
<p><mark>TODO</mark>: identify unsafe features and risky environment variables.</p>
<h3><a class="header" href="#clippy" id="clippy">clippy</a></h3>
<p>Clippy is a tool that provides and checks many lints (bugs, styling, performance
issues, etc.). Since the stable toolchain has reached version 1.29, <code>clippy</code> can
be used within the stable rustup environment. It is also recommended
to install <code>clippy</code> as a component (<code>rustup component add clippy</code>) in the
stable toolchain instead of installing it as a project dependency.</p>
<p>The tool comes with some lint categories regarding the kind of issue it aims to
detect. The warnings should be re-checked by the programmer before committing
the fix that is suggested by <code>clippy</code>, especially in the case of lints of the
category <code>clippy::nursery</code> since those hints are still under development.</p>
<blockquote>
<h3><a class="header" href="#rule-a-iddenv-linteradenv-linter" id="rule-a-iddenv-linteradenv-linter">Rule <a id="DENV-LINTER"></a>DENV-LINTER:</a></h3>
<p>The tool <code>clippy</code> must be used at various times during a secure application
development process.</p>
</blockquote>
<h3><a class="header" href="#rustfmt" id="rustfmt">rustfmt</a></h3>
<p><code>rustfmt</code> is a tool that formats your code according to style guidelines. The
documentation of the tool states some limitations, among others partial macro
declarations and uses support. One should use the <code>--check</code> option that prints
found differences, review these changes, and finally apply them if the code
readability is not affected.</p>
<p>So, to launch it:</p>
<pre><code class="language-shell">$ cargo fmt -- --check
$ # review of the changes
$ cargo fmt
</code></pre>
<p>These guidelines can be customized to your needs by creating a <code>rustfmt.toml</code> or
<code>.rustfmt.toml</code> file at the root of your project. It will be used to override
the default settings, for instance:</p>
<pre><code class="language-toml"># Set the maximum line width to 120
max_width = 120
# Maximum line length for single line if-else expressions
single_line_if_else_max_width = 40
</code></pre>
<p>For more information about the guidelines that <code>rustfmt</code> will check, have a look
at the <a href="https://github.com/rust-dev-tools/fmt-rfcs/blob/master/guide/guide.md">Rust Style Guide</a>.</p>
<blockquote>
<h3><a class="header" href="#rule-a-iddenv-formatadenv-format" id="rule-a-iddenv-formatadenv-format">Rule <a id="DENV-FORMAT"></a>DENV-FORMAT</a></h3>
<p>The tool <code>rustfmt</code> can be used to ensure that the codebase respect style
guidelines (as described in <code>rustfmt.toml</code> file), with <code>--check</code> option and
manual review.</p>
</blockquote>
<h3><a class="header" href="#others" id="others">Others</a></h3>
<p>There exist other useful tools or cargo subcommands for enforcing program
security whether by searching for specific code patterns or by providing
convenient commands for testing or fuzzing. They are discussed in the following
chapters, according to their goals.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="01_introduction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="03_libraries.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="01_introduction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="03_libraries.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
